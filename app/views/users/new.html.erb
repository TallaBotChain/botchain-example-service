<div id="clearance" class="sign-up">
  <h1><%= t(".title") %></h1>

  <% if @user.errors.any? %>
    <div class="validation-error">
      <h3>Please fix the following errors:</h3>
      <ul>
        <% @user.errors.full_messages.each do |msg| %>
        <li>
          <%= msg %>
        </li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <%= form_for @user do |form| %>
  <%= render partial: '/users/form', object: form %>

  <div class="submit-field">
    <%= form.submit class: "white-button", value: "Sign Up" %>
  </div>

  <div class="other-links">
    <%= link_to t(".sign_in"), sign_in_path %>
  </div>
  <% end %>
</div>

<script>
  function buildNewWallet() {
    var encryptedMnemonic = window.keyTools.generateEncryptedMnemonic(
      $("#user_password").val()
    );
    $("#user_encrypted_mnemonic").val( encryptedMnemonic );
  }

  $(function(){
    $("#new_user").submit(function(evt) {
      buildNewWallet();
      return true;
    });
  });
</script>
